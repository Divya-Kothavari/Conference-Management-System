<p class="footer-text"><a (click)="openSupportPopup()">Need Support?</a></p>

 <nz-modal
    [(nzVisible)]="isVisible"
    [nzTitle]="modalTitle"
    [nzContent]="modalContent"
    [nzFooter]="modalFooter"
    (nzOnCancel)="closeSupportModal()"
  >

  <ng-template #modalTitle>
    Get Support
    <!-- <i nz-icon nzType="close-circle" nzTheme="outline" class="close-circle" (click)="closeSupportModal()"></i> -->
  </ng-template>

  <ng-template #modalContent>
    <form
    nz-form
    nzNoColon = true
    [formGroup]="supportDetailsForm"
    class="login-form"
  >
    <nz-form-item>
      <nz-form-label nzFor="topic">How may we help you?</nz-form-label>
        <nz-form-control>
            <nz-select
            nzShowSearch
            name="selectTopic"
            #selectTopic = "ngModel"
            nzPlaceHolder="Please select a topic"
            [(ngModel)]="selectedValue"  [ngModelOptions]="{standalone: true}"
           >
            <nz-option nz-value="'Please select a topic'" [nzLabel]="'Please select a topic'"></nz-option>
            <nz-option *ngFor="let item of supportDropDownVal"  [nzValue]="item" [nzLabel]="item"></nz-option>
          </nz-select>
           <nz-form-explain
          *ngIf="invalidTopic && selectTopic.untouched"
          class="form-error"
          >You have not selected a topic!</nz-form-explain>
      </nz-form-control>
    </nz-form-item>
    <nz-form-item>
      <nz-form-label nzFor="registrationNumber">Registration Number</nz-form-label>
      <nz-form-control>
          <input
            type="text"
            nz-input
            formControlName="registrationNumber"
            placeholder="Enter Registration Number"
            pattern="^(?!\s*$)[-a-zA-Z0-9_:,.' ']{1,100}$"
          />
        <nz-form-explain
          *ngIf="
          supportDetailsForm.get('registrationNumber')?.dirty &&
          supportDetailsForm.get('registrationNumber')?.errors
          "
          >Registration number cannot be blank!</nz-form-explain>
      </nz-form-control>
    </nz-form-item>
    <nz-form-item>
      <nz-form-label nzFor="contactNumber">Contact Number</nz-form-label>
      <nz-form-control>
        <nz-input-group [nzAddOnBefore]="addOnBeforeTemplate">
          <ng-template #addOnBeforeTemplate>
            <nz-select [(ngModel)]="selectedCountryCode"  [ngModelOptions]="{standalone: true}">
                <nz-option *ngFor="let option of countryCodeData" [nzLabel]="option.label" [nzValue]="option.value"></nz-option>
              </nz-select>
            </ng-template>
              <input
              type="text"
              nz-input
              formControlName="phoneNo"
              placeholder="Enter Phone number"
              pattern="^[1-9]\d{9}$"
            />
        </nz-input-group>
        <nz-form-explain
            *ngIf="
            supportDetailsForm.get('phoneNo')?.dirty &&
            supportDetailsForm.get('phoneNo')?.errors
            "
            >Contact number cannot be blank!</nz-form-explain>
      </nz-form-control>
    </nz-form-item>
    <nz-form-item>
      <nz-form-label nzFor="userEmail">Email ID</nz-form-label>
        <nz-form-control>
          <input
             type="email"
             nz-input
             formControlName="userEmail"
             placeholder="Please enter your registered Email id."
           />
           <nz-form-explain
              *ngIf="
              supportDetailsForm.get('userEmail')?.dirty &&
              supportDetailsForm.get('userEmail')?.errors
              "
              >Email Id cannot be blank!
            </nz-form-explain>
        </nz-form-control>
    </nz-form-item>
    <nz-form-item>
          <nz-form-label nzFor="message">Message</nz-form-label>
            <nz-form-control>
              <textarea rows="4"
                 nz-input
                 formControlName="message"
                 placeholder="Please enter your message here."
               ></textarea>
               <nz-form-explain
                  *ngIf="
                  supportDetailsForm.get('message')?.dirty &&
                  supportDetailsForm.get('message')?.errors
                  "
                  >Message Description cannot be blank!
                </nz-form-explain>
            </nz-form-control>
    </nz-form-item>
  </form>
  </ng-template>

  <ng-template #modalFooter>
    <button nz-button nzType="default" (click)="closeSupportModal()">Cancel</button>
    <button nz-button nzType="primary" (click)="submitForm()">Send Request</button>
  </ng-template>
</nz-modal>
